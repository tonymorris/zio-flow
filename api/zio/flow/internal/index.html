<!DOCTYPE html ><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/><title></title><meta content="" name="description"/><meta content="" name="keywords"/><meta http-equiv="content-type" content="text/html; charset=UTF-8"/><link href="../../../lib/index.css" media="screen" type="text/css" rel="stylesheet"/><link href="../../../lib/template.css" media="screen" type="text/css" rel="stylesheet"/><link href="../../../lib/print.css" media="print" type="text/css" rel="stylesheet"/><link href="../../../lib/diagrams.css" media="screen" type="text/css" rel="stylesheet" id="diagrams-css"/><script type="text/javascript" src="../../../lib/jquery.min.js"></script><script type="text/javascript" src="../../../lib/index.js"></script><script type="text/javascript" src="../../../index.js"></script><script type="text/javascript" src="../../../lib/scheduler.js"></script><script type="text/javascript" src="../../../lib/template.js"></script><script type="text/javascript">/* this variable can be used by the JS to determine the path to the root document */
var toRoot = '../../../';</script></head><body><div id="search"><span id="doc-title"><span id="doc-version"></span></span> <span class="close-results"><span class="left">&lt;</span> Back</span><div id="textfilter"><span class="input"><input autocapitalize="none" placeholder="Search" id="index-input" type="text" accesskey="/"/><i class="clear material-icons"></i><i id="search-icon" class="material-icons"></i></span></div></div><div id="search-results"><div id="search-progress"><div id="progress-fill"></div></div><div id="results-content"><div id="entity-results"></div><div id="member-results"></div></div></div><div id="content-scroll-container" style="-webkit-overflow-scrolling: touch;"><div id="content-container" style="-webkit-overflow-scrolling: touch;"><div id="subpackage-spacer"><div id="packages"><h1>Packages</h1><ul><li class="indented0 " name="_root_.root" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="_root_" class="anchorToMember"></a><a id="root:_root_" class="anchorToMember"></a> <span class="permalink"><a href="../../../index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../../../index.html" title=""><span class="name">root</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../../index.html" name="_root_" id="_root_" class="extype">root</a></dd></dl></div></li><li class="indented1 " name="_root_.zio" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="zio" class="anchorToMember"></a><a id="zio:zio" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../../index.html" title=""><span class="name">zio</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../../index.html" name="_root_" id="_root_" class="extype">root</a></dd></dl></div></li><li class="indented2 " name="zio.flow" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="flow" class="anchorToMember"></a><a id="flow:flow" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../index.html" title=""><span class="name">flow</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../index.html" name="zio" id="zio" class="extype">zio</a></dd></dl></div></li><li class="indented3 current" name="zio.flow.internal" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="internal" class="anchorToMember"></a><a id="internal:internal" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><span class="name">internal</span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../index.html" name="zio.flow" id="zio.flow" class="extype">flow</a></dd></dl></div></li><li class="current-entities indented3"><a href="DurableLog$.html" title="" class="object"></a> <a href="DurableLog.html" title="" class="trait"></a><a href="DurableLog.html" title="">DurableLog</a></li><li class="current-entities indented3"><a href="DurablePromise$.html" title="" class="object"></a> <a href="DurablePromise.html" title="" class="class"></a><a href="DurablePromise.html" title="">DurablePromise</a></li><li class="current-entities indented3"><a href="IndexedStore$.html" title="" class="object"></a> <a href="IndexedStore.html" title="" class="trait"></a><a href="IndexedStore.html" title="">IndexedStore</a></li><li class="current-entities indented3"><a href="KeyValueStore$.html" title="" class="object"></a> <a href="KeyValueStore.html" title="" class="trait"></a><a href="KeyValueStore.html" title="">KeyValueStore</a></li><li class="current-entities indented3"><span class="separator"></span> <a href="Namespaces$.html" title="" class="object"></a><a href="Namespaces$.html" title="">Namespaces</a></li><li class="current-entities indented3"><a href="PersistentExecutor$.html" title="" class="object"></a> <a href="PersistentExecutor.html" title="" class="class"></a><a href="PersistentExecutor.html" title="">PersistentExecutor</a></li><li class="current-entities indented3"><a href="PersistentWorkflowStatus$.html" title="" class="object"></a> <a href="PersistentWorkflowStatus.html" title="" class="trait"></a><a href="PersistentWorkflowStatus.html" title="">PersistentWorkflowStatus</a></li><li class="current-entities indented3"><a href="RecordingRemoteContext$.html" title="" class="object"></a> <a href="RecordingRemoteContext.html" title="" class="trait"></a><a href="RecordingRemoteContext.html" title="">RecordingRemoteContext</a></li><li class="current-entities indented3"><a href="RemoteVariableKeyValueStore$.html" title="" class="object"></a> <a href="RemoteVariableKeyValueStore.html" title="" class="class"></a><a href="RemoteVariableKeyValueStore.html" title="">RemoteVariableKeyValueStore</a></li><li class="current-entities indented3"><a href="RemoteVariableScope$.html" title="" class="object"></a> <a href="RemoteVariableScope.html" title="Describes a remote variable's scope" class="trait"></a><a href="RemoteVariableScope.html" title="Describes a remote variable's scope">RemoteVariableScope</a></li><li class="current-entities indented3"><a href="ScopedRemoteVariableName$.html" title="" class="object"></a> <a href="ScopedRemoteVariableName.html" title="" class="class"></a><a href="ScopedRemoteVariableName.html" title="">ScopedRemoteVariableName</a></li><li class="current-entities indented3"><a href="Timestamp$.html" title="" class="object"></a> <a href="Timestamp.html" title="" class="class"></a><a href="Timestamp.html" title="">Timestamp</a></li><li class="current-entities indented3"><span class="separator"></span> <a href="Topics$.html" title="" class="object"></a><a href="Topics$.html" title="">Topics</a></li><li class="current-entities indented3"><a href="TransactionFailure$.html" title="" class="object"></a> <a href="TransactionFailure.html" title="" class="trait"></a><a href="TransactionFailure.html" title="">TransactionFailure</a></li><li class="current-entities indented3"><a href="VirtualClock$.html" title="" class="object"></a> <a href="VirtualClock.html" title="" class="trait"></a><a href="VirtualClock.html" title="">VirtualClock</a></li><li class="current-entities indented3"><a href="ZFlowExecutor$.html" title="" class="object"></a> <a href="ZFlowExecutor.html" title="" class="trait"></a><a href="ZFlowExecutor.html" title="">ZFlowExecutor</a></li><li class="indented3 " name="zio.flow.remote" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="remote" class="anchorToMember"></a><a id="remote:remote" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/remote/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../remote/index.html" title=""><span class="name">remote</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../index.html" name="zio.flow" id="zio.flow" class="extype">flow</a></dd></dl></div></li><li class="indented3 " name="zio.flow.serialization" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="serialization" class="anchorToMember"></a><a id="serialization:serialization" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/serialization/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../serialization/index.html" title=""><span class="name">serialization</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../index.html" name="zio.flow" id="zio.flow" class="extype">flow</a></dd></dl></div></li></ul></div></div><div id="content"><body class="package value"><div id="definition"><div class="big-circle package">p</div><p id="owner"><a href="../../index.html" name="zio" id="zio" class="extype">zio</a>.<a href="../index.html" name="zio.flow" id="zio.flow" class="extype">flow</a></p><h1>internal<span class="permalink"><a href="../../../zio/flow/internal/index.html" title="Permalink"><i class="material-icons"></i></a></span></h1></div><h4 id="signature" class="signature"><span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><span class="name">internal</span></span></h4><div id="comment" class="fullcommenttop"></div><div id="mbrsel"><div class="toggle"></div><div id="memberfilter"><i class="material-icons arrow"></i><span class="input"><input placeholder="Filter all members" id="mbrsel-input" type="text" accesskey="/"/></span><i class="clear material-icons"></i></div><div id="filterby"><div id="order"><span class="filtertype">Ordering</span><ol><li class="alpha in"><span>Alphabetic</span></li></ol></div><div id="visbl"><span class="filtertype">Visibility</span><ol><li class="public in"><span>Public</span></li><li class="protected out"><span>Protected</span></li></ol></div></div></div><div id="template"><div id="allMembers"><div id="types" class="types members"><h3>Type Members</h3><ol><li class="indented0 " name="zio.flow.internal.DurableLog" group="Ungrouped" fullComment="no" data-isabs="true" visbl="pub"><a id="DurableLogextendsAnyRef" class="anchorToMember"></a><a id="DurableLog:DurableLog" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/DurableLog.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">trait</span></span> <span class="symbol"><a href="DurableLog.html" title=""><span class="name">DurableLog</span></a><span class="result"> extends <a href="https://www.scala-lang.org/api/2.13.8/scala/AnyRef.html#scala.AnyRef" name="scala.AnyRef" id="scala.AnyRef" class="extype">AnyRef</a></span></span></li><li class="indented0 " name="zio.flow.internal.DurablePromise" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="DurablePromise[E,A]extendsProductwithSerializable" class="anchorToMember"></a><a id="DurablePromise[E,A]:DurablePromise[E,A]" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/DurablePromise.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">case class</span></span> <span class="symbol"><a href="DurablePromise.html" title=""><span class="name">DurablePromise</span></a><span class="tparams">[<span name="E">E</span>, <span name="A">A</span>]</span><span class="params">(<span name="promiseId">promiseId: <span name="scala.Predef.String" class="extype">String</span></span>)</span><span class="result"> extends <a href="https://www.scala-lang.org/api/2.13.8/scala/Product.html#scala.Product" name="scala.Product" id="scala.Product" class="extype">Product</a> with <span name="scala.Serializable" class="extype">Serializable</span></span></span></li><li class="indented0 " name="zio.flow.internal.IndexedStore" group="Ungrouped" fullComment="no" data-isabs="true" visbl="pub"><a id="IndexedStoreextendsAnyRef" class="anchorToMember"></a><a id="IndexedStore:IndexedStore" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/IndexedStore.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">trait</span></span> <span class="symbol"><a href="IndexedStore.html" title=""><span class="name">IndexedStore</span></a><span class="result"> extends <a href="https://www.scala-lang.org/api/2.13.8/scala/AnyRef.html#scala.AnyRef" name="scala.AnyRef" id="scala.AnyRef" class="extype">AnyRef</a></span></span></li><li class="indented0 " name="zio.flow.internal.KeyValueStore" group="Ungrouped" fullComment="no" data-isabs="true" visbl="pub"><a id="KeyValueStoreextendsAnyRef" class="anchorToMember"></a><a id="KeyValueStore:KeyValueStore" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/KeyValueStore.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">trait</span></span> <span class="symbol"><a href="KeyValueStore.html" title=""><span class="name">KeyValueStore</span></a><span class="result"> extends <a href="https://www.scala-lang.org/api/2.13.8/scala/AnyRef.html#scala.AnyRef" name="scala.AnyRef" id="scala.AnyRef" class="extype">AnyRef</a></span></span></li><li class="indented0 " name="zio.flow.internal.PersistentExecutor" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="PersistentExecutorextendsZFlowExecutorwithProductwithSerializable" class="anchorToMember"></a><a id="PersistentExecutor:PersistentExecutor" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/PersistentExecutor.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">case class</span></span> <span class="symbol"><a href="PersistentExecutor.html" title=""><span class="name">PersistentExecutor</span></a><span class="params">(<span name="execEnv">execEnv: <a href="../ExecutionEnvironment.html" name="zio.flow.ExecutionEnvironment" id="zio.flow.ExecutionEnvironment" class="extype">ExecutionEnvironment</a></span>, <span name="durableLog">durableLog: <a href="DurableLog.html" name="zio.flow.internal.DurableLog" id="zio.flow.internal.DurableLog" class="extype">DurableLog</a></span>, <span name="kvStore">kvStore: <a href="KeyValueStore.html" name="zio.flow.internal.KeyValueStore" id="zio.flow.internal.KeyValueStore" class="extype">KeyValueStore</a></span>, <span name="opExec">opExec: <a href="../OperationExecutor.html" name="zio.flow.OperationExecutor" id="zio.flow.OperationExecutor" class="extype">OperationExecutor</a>[<a href="https://www.scala-lang.org/api/2.13.8/scala/Any.html#scala.Any" name="scala.Any" id="scala.Any" class="extype">Any</a>]</span>, <span name="workflows">workflows: <a href="https://javadoc.io/page/dev.zio/zio_2.13/2.0.0-RC6/zio/Ref.html#zio.Ref" name="zio.Ref" id="zio.Ref" class="extype">Ref</a>[<span name="scala.Predef.Map" class="extype">Map</span>[<a href="../index.html#FlowId=zio.flow.package.FlowId.Type" name="zio.flow.FlowId" id="zio.flow.FlowId" class="extmbr">FlowId</a>, <a href="PersistentExecutor$$RuntimeState.html" name="zio.flow.internal.PersistentExecutor.RuntimeState" id="zio.flow.internal.PersistentExecutor.RuntimeState" class="extype">RuntimeState</a>[_, _]]]</span>)</span><span class="result"> extends <a href="ZFlowExecutor.html" name="zio.flow.internal.ZFlowExecutor" id="zio.flow.internal.ZFlowExecutor" class="extype">ZFlowExecutor</a> with <a href="https://www.scala-lang.org/api/2.13.8/scala/Product.html#scala.Product" name="scala.Product" id="scala.Product" class="extype">Product</a> with <span name="scala.Serializable" class="extype">Serializable</span></span></span></li><li class="indented0 " name="zio.flow.internal.PersistentWorkflowStatus" group="Ungrouped" fullComment="no" data-isabs="true" visbl="pub"><a id="PersistentWorkflowStatusextendsAnyRef" class="anchorToMember"></a><a id="PersistentWorkflowStatus:PersistentWorkflowStatus" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/PersistentWorkflowStatus.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">sealed </span> <span class="kind">trait</span></span> <span class="symbol"><a href="PersistentWorkflowStatus.html" title=""><span class="name">PersistentWorkflowStatus</span></a><span class="result"> extends <a href="https://www.scala-lang.org/api/2.13.8/scala/AnyRef.html#scala.AnyRef" name="scala.AnyRef" id="scala.AnyRef" class="extype">AnyRef</a></span></span></li><li class="indented0 " name="zio.flow.internal.RecordingRemoteContext" group="Ungrouped" fullComment="no" data-isabs="true" visbl="pub"><a id="RecordingRemoteContextextendsAnyRef" class="anchorToMember"></a><a id="RecordingRemoteContext:RecordingRemoteContext" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/RecordingRemoteContext.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">trait</span></span> <span class="symbol"><a href="RecordingRemoteContext.html" title=""><span class="name">RecordingRemoteContext</span></a><span class="result"> extends <a href="https://www.scala-lang.org/api/2.13.8/scala/AnyRef.html#scala.AnyRef" name="scala.AnyRef" id="scala.AnyRef" class="extype">AnyRef</a></span></span></li><li class="indented0 " name="zio.flow.internal.RemoteVariableKeyValueStore" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="RemoteVariableKeyValueStoreextendsProductwithSerializable" class="anchorToMember"></a><a id="RemoteVariableKeyValueStore:RemoteVariableKeyValueStore" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/RemoteVariableKeyValueStore.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">case class</span></span> <span class="symbol"><a href="RemoteVariableKeyValueStore.html" title=""><span class="name">RemoteVariableKeyValueStore</span></a><span class="params">(<span name="keyValueStore">keyValueStore: <a href="KeyValueStore.html" name="zio.flow.internal.KeyValueStore" id="zio.flow.internal.KeyValueStore" class="extype">KeyValueStore</a></span>, <span name="readVariables">readVariables: <a href="https://javadoc.io/page/dev.zio/zio_2.13/2.0.0-RC6/zio/stm/TSet.html#zio.stm.TSet" name="zio.stm.TSet" id="zio.stm.TSet" class="extype">TSet</a>[<a href="ScopedRemoteVariableName.html" name="zio.flow.internal.ScopedRemoteVariableName" id="zio.flow.internal.ScopedRemoteVariableName" class="extype">ScopedRemoteVariableName</a>]</span>, <span name="executionEnvironment">executionEnvironment: <a href="../ExecutionEnvironment.html" name="zio.flow.ExecutionEnvironment" id="zio.flow.ExecutionEnvironment" class="extype">ExecutionEnvironment</a></span>, <span name="durableLog">durableLog: <a href="DurableLog.html" name="zio.flow.internal.DurableLog" id="zio.flow.internal.DurableLog" class="extype">DurableLog</a></span>, <span name="lastIndex">lastIndex: <a href="https://javadoc.io/page/dev.zio/zio_2.13/2.0.0-RC6/zio/stm/TRef.html#zio.stm.TRef" name="zio.stm.TRef" id="zio.stm.TRef" class="extype">TRef</a>[<a href="IndexedStore$.html#Index=zio.flow.internal.IndexedStore.Index.Type" name="zio.flow.internal.IndexedStore.Index" id="zio.flow.internal.IndexedStore.Index" class="extmbr">Index</a>]</span>)</span><span class="result"> extends <a href="https://www.scala-lang.org/api/2.13.8/scala/Product.html#scala.Product" name="scala.Product" id="scala.Product" class="extype">Product</a> with <span name="scala.Serializable" class="extype">Serializable</span></span></span></li><li class="indented0 " name="zio.flow.internal.RemoteVariableScope" group="Ungrouped" fullComment="yes" data-isabs="true" visbl="pub"><a id="RemoteVariableScopeextendsAnyRef" class="anchorToMember"></a><a id="RemoteVariableScope:RemoteVariableScope" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/RemoteVariableScope.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">sealed </span> <span class="kind">trait</span></span> <span class="symbol"><a href="RemoteVariableScope.html" title="Describes a remote variable's scope"><span class="name">RemoteVariableScope</span></a><span class="result"> extends <a href="https://www.scala-lang.org/api/2.13.8/scala/AnyRef.html#scala.AnyRef" name="scala.AnyRef" id="scala.AnyRef" class="extype">AnyRef</a></span></span><p class="shortcomment cmt">Describes a remote variable's scope</p><div class="fullcomment"><div class="comment cmt"><p>Describes a remote variable's scope</p><p>## Scoping rules</p><p>### Workflows A top level workflow defines the top level scope by it's unique
flow identifier. This guarantees that:</p><ul><li>separate workflows cannot see each other's variables</li><li>restarted workflows see the same set of variables as the previous run as
    they share the flow id</li></ul><p>Operation semantics on the top level of workflows (not in a forked fiber and
not in an active transaction):</p><ul><li>New(name): creates a new remote variable in the KV store's variable
    namespace called <code>"$$flowid<u>$$name"<code><code></code></code></u></code></li><li>Get(name): reads<code>"$$flowid<u>$$name"<code></code></u></code></li><li>Set(name): writes<code>"$$flowid<u>$$name"<code></code></u></code></li></ul><p>### Fibers Forked workflows are like regular workflows but they are not
individually submitted, instead created by the executor by the Fork operator.</p><p>Each workflow maintains a fork counter and generates new workflow ids based
on that. So a forked workflow's flow identifier will be
<code>"$$parentId_fork$$parentForkCounter"</code>.</p><p>Desired semantics:</p><ul><li>Forked workflows should have read/write access to variables accessible to
    the parent workflow</li><li>Creating new variables in a forked workflow should not be accessible to
    the parent and sibling workflows</li><li>Parallel forked workflows should be able to create independent variables
    with the same name</li></ul><p>Operation semantics in forked workflows:</p><ul><li>New(name): creates a new remote variable in the KV store's variable
    namespace prefixed by the active workflow identifier <code>"$$flowid<u>$$name"<code>
    (which is </code>"$$parentId_fork$$parentForkCounter</u>$$name"</code>).</li><li>Get(name): first finds the variable's scope by first looking in the
    current fiber's scope (using <code>"$$flowid<u>$$name"<code>) - if it does not
    exist, it recursively tries to access the variable in the parent scope
    (</code>"$$parentid</u>$$name"</code>).</li><li>Set(name): same lookup as for Get - Get and Set must always select the
    same variable in an executor step</li></ul><p>### Transactions</p><p>In transactions we have to delay the effect of Set (but within the
transaction still see that value in Get) until the transaction is committed.
This means that we need to store values for the same remote variable name per
transaction beside its original value - which means transactions define their
own scope.</p><p>Desired semantics:</p><ul><li>Creating a new variable in a transaction: should not behave differently
    than in a regular scope<ul><li>transactional variable updates are only interesting if there are
      multiple fibers running transactions modifying the same variable. This
      means that even if there are "colliding" new variables in parallel
      transactions, their parent scope will be different (because fibers are
      also defining scopes) so they would never collide.</li></ul></li><li>Within the transaction, Get and Set should work as usual, but the effect
    of Set should not be visible for other fibers, even if the changed
    variable is in a shared scope.</li><li>When the transaction is committed, the changes are either applied to
    these shared variables, or the transaction gets reverted.</li></ul><p>Flow state contains a transaction counter that can be used as a unique
identifier for transaction scopes, similar to how fiber scopes are generated:
<code>"parentId_tx$$transactionCounter"</code>.</p><p>Operation semantics in transaction scopes:</p><ul><li>New(name): creates a new remote variable in the parent scope</li><li>Get(name): acts the same way as in forked workflows, but also records the
    accessed variable's version if necessary</li><li>Set(name): always sets the value in the transaction scope
    (<code>$$parentid<u>$$name<code>)
</code></u></code></li></ul></div></div></li><li class="indented0 " name="zio.flow.internal.ScopedRemoteVariableName" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="ScopedRemoteVariableNameextendsProductwithSerializable" class="anchorToMember"></a><a id="ScopedRemoteVariableName:ScopedRemoteVariableName" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/ScopedRemoteVariableName.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">case class</span></span> <span class="symbol"><a href="ScopedRemoteVariableName.html" title=""><span class="name">ScopedRemoteVariableName</span></a><span class="params">(<span name="name">name: <a href="../index.html#RemoteVariableName=zio.flow.package.RemoteVariableName.Type" name="zio.flow.RemoteVariableName" id="zio.flow.RemoteVariableName" class="extmbr">RemoteVariableName</a></span>, <span name="scope">scope: <a href="RemoteVariableScope.html" name="zio.flow.internal.RemoteVariableScope" id="zio.flow.internal.RemoteVariableScope" class="extype">RemoteVariableScope</a></span>)</span><span class="result"> extends <a href="https://www.scala-lang.org/api/2.13.8/scala/Product.html#scala.Product" name="scala.Product" id="scala.Product" class="extype">Product</a> with <span name="scala.Serializable" class="extype">Serializable</span></span></span></li><li class="indented0 " name="zio.flow.internal.Timestamp" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="TimestampextendsProductwithSerializable" class="anchorToMember"></a><a id="Timestamp:Timestamp" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/Timestamp.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">case class</span></span> <span class="symbol"><a href="Timestamp.html" title=""><span class="name">Timestamp</span></a><span class="params">(<span name="value">value: <a href="https://www.scala-lang.org/api/2.13.8/scala/Long.html#scala.Long" name="scala.Long" id="scala.Long" class="extype">Long</a></span>)</span><span class="result"> extends <a href="https://www.scala-lang.org/api/2.13.8/scala/Product.html#scala.Product" name="scala.Product" id="scala.Product" class="extype">Product</a> with <span name="scala.Serializable" class="extype">Serializable</span></span></span></li><li class="indented0 " name="zio.flow.internal.TransactionFailure" group="Ungrouped" fullComment="no" data-isabs="true" visbl="pub"><a id="TransactionFailure[+E]extendsAnyRef" class="anchorToMember"></a><a id="TransactionFailure[+E]:TransactionFailure[E]" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/TransactionFailure.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">sealed </span> <span class="kind">trait</span></span> <span class="symbol"><a href="TransactionFailure.html" title=""><span class="name">TransactionFailure</span></a><span class="tparams">[<span name="E">+E</span>]</span><span class="result"> extends <a href="https://www.scala-lang.org/api/2.13.8/scala/AnyRef.html#scala.AnyRef" name="scala.AnyRef" id="scala.AnyRef" class="extype">AnyRef</a></span></span></li><li class="indented0 " name="zio.flow.internal.VirtualClock" group="Ungrouped" fullComment="no" data-isabs="true" visbl="pub"><a id="VirtualClockextendsAnyRef" class="anchorToMember"></a><a id="VirtualClock:VirtualClock" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/VirtualClock.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">trait</span></span> <span class="symbol"><a href="VirtualClock.html" title=""><span class="name">VirtualClock</span></a><span class="result"> extends <a href="https://www.scala-lang.org/api/2.13.8/scala/AnyRef.html#scala.AnyRef" name="scala.AnyRef" id="scala.AnyRef" class="extype">AnyRef</a></span></span></li><li class="indented0 " name="zio.flow.internal.ZFlowExecutor" group="Ungrouped" fullComment="no" data-isabs="true" visbl="pub"><a id="ZFlowExecutorextendsAnyRef" class="anchorToMember"></a><a id="ZFlowExecutor:ZFlowExecutor" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/ZFlowExecutor.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">trait</span></span> <span class="symbol"><a href="ZFlowExecutor.html" title=""><span class="name">ZFlowExecutor</span></a><span class="result"> extends <a href="https://www.scala-lang.org/api/2.13.8/scala/AnyRef.html#scala.AnyRef" name="scala.AnyRef" id="scala.AnyRef" class="extype">AnyRef</a></span></span></li></ol></div><div class="values members"><h3>Value Members</h3><ol><li class="indented0 " name="zio.flow.internal.DurableLog" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="DurableLog" class="anchorToMember"></a><a id="DurableLog:DurableLog" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/DurableLog$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="DurableLog$.html" title=""><span class="name">DurableLog</span></a></span></li><li class="indented0 " name="zio.flow.internal.DurablePromise" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="DurablePromise" class="anchorToMember"></a><a id="DurablePromise:DurablePromise" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/DurablePromise$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="DurablePromise$.html" title=""><span class="name">DurablePromise</span></a><span class="result"> extends <a href="https://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html#java.io.Serializable" name="java.io.Serializable" id="java.io.Serializable" class="extype">Serializable</a></span></span></li><li class="indented0 " name="zio.flow.internal.IndexedStore" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="IndexedStore" class="anchorToMember"></a><a id="IndexedStore:IndexedStore" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/IndexedStore$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="IndexedStore$.html" title=""><span class="name">IndexedStore</span></a></span></li><li class="indented0 " name="zio.flow.internal.KeyValueStore" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="KeyValueStore" class="anchorToMember"></a><a id="KeyValueStore:KeyValueStore" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/KeyValueStore$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="KeyValueStore$.html" title=""><span class="name">KeyValueStore</span></a></span></li><li class="indented0 " name="zio.flow.internal.Namespaces" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="Namespaces" class="anchorToMember"></a><a id="Namespaces:Namespaces" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/Namespaces$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="Namespaces$.html" title=""><span class="name">Namespaces</span></a></span></li><li class="indented0 " name="zio.flow.internal.PersistentExecutor" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="PersistentExecutor" class="anchorToMember"></a><a id="PersistentExecutor:PersistentExecutor" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/PersistentExecutor$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="PersistentExecutor$.html" title=""><span class="name">PersistentExecutor</span></a><span class="result"> extends <a href="https://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html#java.io.Serializable" name="java.io.Serializable" id="java.io.Serializable" class="extype">Serializable</a></span></span></li><li class="indented0 " name="zio.flow.internal.PersistentWorkflowStatus" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="PersistentWorkflowStatus" class="anchorToMember"></a><a id="PersistentWorkflowStatus:PersistentWorkflowStatus" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/PersistentWorkflowStatus$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="PersistentWorkflowStatus$.html" title=""><span class="name">PersistentWorkflowStatus</span></a></span></li><li class="indented0 " name="zio.flow.internal.RecordingRemoteContext" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="RecordingRemoteContext" class="anchorToMember"></a><a id="RecordingRemoteContext:RecordingRemoteContext" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/RecordingRemoteContext$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="RecordingRemoteContext$.html" title=""><span class="name">RecordingRemoteContext</span></a></span></li><li class="indented0 " name="zio.flow.internal.RemoteVariableKeyValueStore" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="RemoteVariableKeyValueStore" class="anchorToMember"></a><a id="RemoteVariableKeyValueStore:RemoteVariableKeyValueStore" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/RemoteVariableKeyValueStore$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="RemoteVariableKeyValueStore$.html" title=""><span class="name">RemoteVariableKeyValueStore</span></a><span class="result"> extends <a href="https://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html#java.io.Serializable" name="java.io.Serializable" id="java.io.Serializable" class="extype">Serializable</a></span></span></li><li class="indented0 " name="zio.flow.internal.RemoteVariableScope" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="RemoteVariableScope" class="anchorToMember"></a><a id="RemoteVariableScope:RemoteVariableScope" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/RemoteVariableScope$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="RemoteVariableScope$.html" title=""><span class="name">RemoteVariableScope</span></a></span></li><li class="indented0 " name="zio.flow.internal.ScopedRemoteVariableName" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="ScopedRemoteVariableName" class="anchorToMember"></a><a id="ScopedRemoteVariableName:ScopedRemoteVariableName" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/ScopedRemoteVariableName$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="ScopedRemoteVariableName$.html" title=""><span class="name">ScopedRemoteVariableName</span></a><span class="result"> extends <a href="https://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html#java.io.Serializable" name="java.io.Serializable" id="java.io.Serializable" class="extype">Serializable</a></span></span></li><li class="indented0 " name="zio.flow.internal.Timestamp" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="Timestamp" class="anchorToMember"></a><a id="Timestamp:Timestamp" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/Timestamp$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="Timestamp$.html" title=""><span class="name">Timestamp</span></a><span class="result"> extends <a href="https://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html#java.io.Serializable" name="java.io.Serializable" id="java.io.Serializable" class="extype">Serializable</a></span></span></li><li class="indented0 " name="zio.flow.internal.Topics" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="Topics" class="anchorToMember"></a><a id="Topics:Topics" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/Topics$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="Topics$.html" title=""><span class="name">Topics</span></a></span></li><li class="indented0 " name="zio.flow.internal.TransactionFailure" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="TransactionFailure" class="anchorToMember"></a><a id="TransactionFailure:TransactionFailure" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/TransactionFailure$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="TransactionFailure$.html" title=""><span class="name">TransactionFailure</span></a></span></li><li class="indented0 " name="zio.flow.internal.VirtualClock" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="VirtualClock" class="anchorToMember"></a><a id="VirtualClock:VirtualClock" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/VirtualClock$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="VirtualClock$.html" title=""><span class="name">VirtualClock</span></a></span></li><li class="indented0 " name="zio.flow.internal.ZFlowExecutor" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="ZFlowExecutor" class="anchorToMember"></a><a id="ZFlowExecutor:ZFlowExecutor" class="anchorToMember"></a> <span class="permalink"><a href="../../../zio/flow/internal/ZFlowExecutor$.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><a href="ZFlowExecutor$.html" title=""><span class="name">ZFlowExecutor</span></a></span></li></ol></div></div><div id="inheritedMembers"></div><div id="groupedMembers"><div name="Ungrouped" class="group"><h3>Ungrouped</h3></div></div></div><div id="tooltip"></div><div id="footer"></div></body></div></div></div></body></html>
